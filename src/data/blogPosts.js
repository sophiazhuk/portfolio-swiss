// Central blog data model for Blog page and blog routes
// This file is auto-generated by scripts/build-blog.js
// DO NOT EDIT MANUALLY - Edit the markdown files in /content/blog/ instead
// Run 'npm run blog:build' to regenerate this file

/**
 * @typedef {Object} BlogPost
 * @property {string} slug - URL-friendly id used in route e.g., /blog/{slug}
 * @property {string} title - Display title
 * @property {string} date - ISO date string (YYYY-MM-DD)
 * @property {string[]} tags - Array of tags for filtering (e.g., ["project", "music", "ideas", "vacation"])
 * @property {string} excerpt - Brief preview text for the blog card
 */

/** @type {BlogPost[]} */
export const blogPosts = [
  {
    slug: "building-this-blog",
    title: "Building a Blog",
    date: "2025-11-14",
    tags: ["project", "ideas"],
    excerpt: "How I built a custom blog system with markdown support.",
  },
];

/**
 * Get all unique tags from blog posts
 * @returns {string[]} Array of unique tags
 */
export const getAllTags = () => {
  const tagSet = new Set();
  blogPosts.forEach((post) => {
    post.tags.forEach((tag) => tagSet.add(tag));
  });
  return Array.from(tagSet).sort();
};

/**
 * Filter blog posts by tag
 * @param {string} tag - Tag to filter by
 * @returns {BlogPost[]} Filtered blog posts
 */
export const getPostsByTag = (tag) => {
  if (!tag || tag === "all") return blogPosts;
  return blogPosts.filter((post) => post.tags.includes(tag));
};

/**
 * Get a single blog post by slug
 * @param {string} slug - Blog post slug
 * @returns {BlogPost | undefined} Blog post or undefined if not found
 */
export const getPostBySlug = (slug) => {
  return blogPosts.find((post) => post.slug === slug);
};
